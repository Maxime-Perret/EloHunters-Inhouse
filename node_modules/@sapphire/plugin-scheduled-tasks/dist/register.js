"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ScheduledTasksPlugin = void 0;
const framework_1 = require("@sapphire/framework");
const ScheduledTaskHandler_1 = require("./lib/ScheduledTaskHandler");
const ScheduledTaskStore_1 = require("./lib/structures/ScheduledTaskStore");
/**
 * @since 1.0.0
 */
class ScheduledTasksPlugin extends framework_1.Plugin {
    constructor() {
        super(...arguments);
        Object.defineProperty(this, "service", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
    }
    /**
     * @since 1.0.0
     */
    static [framework_1.preGenericsInitialization](options) {
        framework_1.container.tasks = new ScheduledTaskHandler_1.ScheduledTaskHandler(options.tasks);
    }
    /**
     * @since 1.0.0
     */
    static [framework_1.postInitialization]() {
        this.stores.register(new ScheduledTaskStore_1.ScheduledTaskStore());
    }
    /**
     * @since 1.0.0
     */
    static [framework_1.postLogin]() {
        framework_1.container.tasks.createRepeated();
    }
}
exports.ScheduledTasksPlugin = ScheduledTasksPlugin;
framework_1.SapphireClient.plugins.registerPreGenericsInitializationHook(ScheduledTasksPlugin[framework_1.preGenericsInitialization], 'Scheduled-Task-PreGenericsInitialization');
framework_1.SapphireClient.plugins.registerPostInitializationHook(ScheduledTasksPlugin[framework_1.postInitialization], 'Scheduled-Task-PostInitialization');
framework_1.SapphireClient.plugins.registerPostLoginHook(ScheduledTasksPlugin[framework_1.postLogin], 'Scheduled-Task-PostLogin');
//# sourceMappingURL=register.js.map